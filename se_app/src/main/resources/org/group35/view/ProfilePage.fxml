<?xml version="1.0" encoding="UTF-8"?>

<?import org.group35.view.components.NavBarController?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.shape.SVGPath?>

<VBox xmlns:fx="http://javafx.com/fxml"
      fx:controller="org.group35.view.ProfilePageController"
      stylesheets="@ProfilePage.css"
      styleClass="root-container">

    <!-- NavBar -->
    <NavBarController activePage="MORE"/>

    <!-- Title Row -->
    <HBox styleClass="title-container">
        <Button styleClass="title-back-button" onAction="#gotoMore">
            <graphic>
                <SVGPath content="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"
                         styleClass="title-back-icon"/>
            </graphic>
        </Button>
        <Label text="Describe" styleClass="title-text"/>
        <Label text="●" styleClass="title-dot"/>
    </HBox>

    <!-- 主设置区域（可滚动） -->
    <ScrollPane fitToWidth="true" styleClass="settings-scrollpane">
        <VBox styleClass="settings-container">
            <!-- 账户设置部分 -->
            <VBox styleClass="settings-section">
                <Label text="Account Settings" styleClass="section-title"/>

                <!-- 用户名 -->
                <HBox styleClass="setting-item" spacing="10" alignment="CENTER_LEFT">
                    <StackPane styleClass="icon-field">
                        <TextField fx:id="usernameField"
                                   promptText="Username"
                                   styleClass="input-field"/>
                        <SVGPath content="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"
                                 styleClass="input-icon"
                                 StackPane.alignment="CENTER_RIGHT"/>
                    </StackPane>
                    <Button text="Change" styleClass="change-button" onAction="#handleUsernameChange"/>
                </HBox>

                <!-- 密码 -->
                <HBox styleClass="setting-item" spacing="10" alignment="CENTER_LEFT">
                    <StackPane styleClass="icon-field">
                        <PasswordField fx:id="passwordField"
                                       promptText="Password"
                                       styleClass="input-field"/>
                        <SVGPath content="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"
                                 styleClass="input-icon"
                                 StackPane.alignment="CENTER_RIGHT"/>
                    </StackPane>
                    <Button text="Change" styleClass="change-button" onAction="#handlePasswordChange"/>
                </HBox>

                <!-- 邮箱 -->
                <HBox styleClass="setting-item" spacing="10" alignment="CENTER_LEFT">
                    <StackPane styleClass="icon-field">
                        <TextField fx:id="emailField"
                                   promptText="Email"
                                   styleClass="input-field"/>
                        <SVGPath content="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"
                                 styleClass="input-icon"
                                 StackPane.alignment="CENTER_RIGHT"/>
                    </StackPane>
                    <Button text="Change" styleClass="change-button" onAction="#handleEmailChange"/>
                </HBox>
            </VBox>

            <!-- 偏好设置部分 -->
            <VBox styleClass="settings-section">
                <Label text="Preferences" styleClass="section-title"/>

                <!-- 主题选择 -->
                <HBox styleClass="setting-item" spacing="10" alignment="CENTER_LEFT">
                    <SVGPath content="M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3Z"
                             styleClass="item-icon"/>
                    <ComboBox fx:id="themeComboBox" styleClass="preference-combo" promptText="Select Theme"/>
                </HBox>

                <!-- 语言选择 -->
                <HBox styleClass="setting-item" spacing="10" alignment="CENTER_LEFT">
                    <SVGPath content="M12.87,15.07L10.33,12.56L10.36,12.53C12.1,10.59 13.34,8.36 14.07,6H17V4H10V2H8V4H1V6H12.17C11.5,7.92 10.44,9.75 9,11.35C8.07,10.32 7.3,9.19 6.69,8H4.69C5.42,9.63 6.42,11.17 7.67,12.56L2.58,17.58L4,19L9,14L12.11,17.11L12.87,15.07M18.5,10H16.5L12,22H14L15.12,19H19.87L21,22H23L18.5,10M15.88,17L17.5,12.67L19.12,17H15.88Z"
                             styleClass="item-icon"/>
                    <ComboBox fx:id="languageComboBox" styleClass="preference-combo" promptText="Select Language"/>
                </HBox>

                <!-- 通知设置 -->
                <HBox styleClass="setting-item" spacing="10" alignment="CENTER_LEFT">
                    <SVGPath content="M12,22A2,2 0 0,0 14,20H10A2,2 0 0,0 12,22M18,16V11C18,7.93 16.36,5.36 13.5,4.68V4A1.5,1.5 0 0,0 12,2.5A1.5,1.5 0 0,0 10.5,4V4.68C7.63,5.36 6,7.92 6,11V16L4,18V19H20V18L18,16Z"
                             styleClass="item-icon"/>
                    <CheckBox fx:id="notificationsCheckBox" text="Enable Notifications" styleClass="preference-checkbox"/>
                </HBox>
            </VBox>

            <!-- 其他选项部分 -->
            <VBox styleClass="settings-section">
                <Label text="More Options" styleClass="section-title"/>

                <!-- 反馈 -->
                <HBox styleClass="setting-item" spacing="10" alignment="CENTER_LEFT" onMouseClicked="#gotoFeedback">
                    <SVGPath content="M9,22C8.4,22 8,21.6 8,21V18H4C2.9,18 2,17.1 2,16V4C2,2.9 2.9,2 4,2H20C21.1,2 22,2.9 22,4V16C22,17.1 21.1,18 20,18H13.9L10.2,21.7C10,21.9 9.8,22 9.5,22H9M10,16V19.1L13.1,16H20V4H4V16H10M16.3,6L14.9,9H17V13H13V8.8L14.3,6H16.3M10.3,6L8.9,9H11V13H7V8.8L8.3,6H10.3Z"
                             styleClass="item-icon"/>
                    <Label text="Feedback" styleClass="item-title"/>
                </HBox>

                <!-- 订阅 -->
                <HBox styleClass="setting-item" spacing="10" alignment="CENTER_LEFT" onMouseClicked="#gotoSubscription">
                    <SVGPath content="M14,10H3V12H14V10M14,6H3V8H14V6M3,16H10V14H3V16M21.5,11.5L23,13L16,20L11.5,15.5L13,14L16,17L21.5,11.5Z"
                             styleClass="item-icon"/>
                    <Label text="Subscription" styleClass="item-title"/>
                </HBox>

                <!-- 关于 -->
                <HBox styleClass="setting-item" spacing="10" alignment="CENTER_LEFT" onMouseClicked="#gotoAbout">
                    <SVGPath content="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"
                             styleClass="item-icon"/>
                    <Label text="About" styleClass="item-title"/>
                </HBox>
            </VBox>
        </VBox>
    </ScrollPane>
</VBox>