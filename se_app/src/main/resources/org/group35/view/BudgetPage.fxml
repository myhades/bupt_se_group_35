<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx/8"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.group35.view.BudgetPageController"
            styleClass="main-container"
            stylesheets="@BudgetPage.css">

    <!-- 页面标题 -->
    <top>
        <VBox styleClass="page-header" spacing="10">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            <Label text="Budget Management" styleClass="page-title"/>
            <Text text="Monitor and adjust your spending limits efficiently" styleClass="page-subtitle"/>
        </VBox>
    </top>

    <!-- 主要内容区域 -->
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" styleClass="content-scrollpane">
            <VBox spacing="20" styleClass="content-container">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <!-- 预算概览卡片 -->
                <HBox spacing="20" styleClass="overview-card">
                    <VBox styleClass="budget-info" HBox.hgrow="ALWAYS">
                        <Label text="Current Budget" styleClass="section-title"/>
                        <HBox spacing="30" alignment="CENTER_LEFT">
                            <VBox spacing="5">
                                <Label text="Total Budget" styleClass="info-label"/>
                                <Label fx:id="totalBudgetLabel" text="" styleClass="amount-label"/>
                            </VBox>
                            <VBox spacing="5">
                                <Label text="Used" styleClass="info-label"/>
                                <Label fx:id="usedLabel" text="" styleClass="amount-label"/>
                                <Label fx:id="usedPercentLabel" text="" styleClass="percent-label"/>
                            </VBox>
                            <VBox spacing="5">
                                <Label text="Available" styleClass="info-label"/>
                                <Label fx:id="availableLabel" text="" styleClass="amount-label"/>
                                <Label fx:id="availablePercentLabel" text="" styleClass="percent-label"/>
                            </VBox>
                        </HBox>
                        <Button fx:id="editBudgetButton" text="Edit Budget"
                                onAction="#showEditBudgetDialog" styleClass="action-button"/>
                    </VBox>

                    <PieChart fx:id="budgetPieChart"
                              title="Budget Overview"
                              legendVisible="false"
                              labelsVisible="true"
                              styleClass="budget-chart"/>
                </HBox>

                <!-- 近期消费历史 -->
                <VBox styleClass="history-card">
                    <Label text="Recent Spending History" styleClass="section-title"/>
                    <TableView fx:id="recentSpendingTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="dateColumn" text="Date" prefWidth="100"/>
                            <TableColumn fx:id="categoryColumn" text="Category" prefWidth="150"/>
                            <TableColumn fx:id="amountColumn" text="Amount" prefWidth="100"/>
                            <TableColumn fx:id="descriptionColumn" text="Description" prefWidth="250"/>
                        </columns>
                    </TableView>
                </VBox>

                <!-- 建议区域 -->
                <HBox spacing="20" styleClass="action-cards">
                    <VBox styleClass="action-card" HBox.hgrow="ALWAYS">
                        <Label text="Get Recommendations" styleClass="card-title"/>
                        <Text text="Get personalized budget recommendations based on your spending patterns"
                              styleClass="card-description" wrappingWidth="300"/>
                        <Button fx:id="recommendationButton" text="View Recommendations"
                                onAction="#gotoRecommendation" styleClass="card-button"/>
                    </VBox>

                    <VBox styleClass="action-card" HBox.hgrow="ALWAYS">
                        <Label text="AI Budget Suggestions" styleClass="card-title"/>
                        <Text text="Let our AI analyze your finances and provide intelligent budget suggestions"
                              styleClass="card-description" wrappingWidth="300"/>
                        <Button fx:id="AIButton" text="Get AI Suggestions"
                                onAction="#gotoAISuggestion" styleClass="card-button"/>
                    </VBox>
                </HBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>