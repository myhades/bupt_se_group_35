<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import org.group35.view.components.NavBarController?>

<VBox xmlns:fx="http://javafx.com/fxml" fx:controller="org.group35.view.RecognizeBillController"
      stylesheets="@RecognizeBillPage.css" styleClass="root-container"
      spacing="20">
    <children>
        <!-- Top Nav Bar -->
        <NavBarController activePage="HOME" />

        <!-- Header Row: Back button, Title, and Status Indicator -->
        <HBox styleClass="header-row" alignment="CENTER_LEFT" spacing="10">
            <Button fx:id="backButton" mnemonicParsing="false" onAction="#gotoSpending" styleClass="back-button">
                <graphic>
                    <Label styleClass="back-arrow" text="←"/>
                </graphic>
            </Button>
            <Label text="Recognize Bill" styleClass="page-title" />
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="statusIndicator" text="●" styleClass="status-indicator" />
        </HBox>

        <!-- Camera Preview / Placeholder -->
        <StackPane fx:id="cameraContainer" styleClass="camera-container" maxWidth="700.0" maxHeight="400.0">
            <children>
                <ImageView fx:id="previewImage" fitWidth="600" fitHeight="300" preserveRatio="true" styleClass="preview-image" />
                <VBox fx:id="placeholderBox" alignment="CENTER" styleClass="frame-placeholder" maxWidth="650" maxHeight="350">
                    <children>
                        <ImageView fitWidth="50" fitHeight="50" preserveRatio="true">
                            <image>
                                <Image url="@assets/images/camera_icon.png" />
                            </image>
                        </ImageView>
                        <Label text="Place your bill\ninside the frame" textAlignment="CENTER" styleClass="placeholder-text" />
                    </children>
                </VBox>
            </children>
        </StackPane>

        <!-- Action Row: Capture and Process Buttons -->
        <HBox styleClass="action-row" alignment="CENTER" spacing="20">
            <Button fx:id="captureButton" mnemonicParsing="false" onAction="#handleCaptureButton"
                    text="Capture" styleClass="primary-button" />
            <Button fx:id="processButton" mnemonicParsing="false" onAction="#handleProcessButton"
                    text="Process Bill" styleClass="primary-button" />
        </HBox>

    </children>

    <!-- Padding around entire layout -->
    <padding>
        <Insets top="20" right="20" bottom="20" left="20" />
    </padding>
</VBox>
