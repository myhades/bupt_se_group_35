<?xml version="1.0" encoding="UTF-8"?>

<?import org.group35.view.components.NavBarController?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.shape.SVGPath?>

<VBox xmlns:fx="http://javafx.com/fxml"
      fx:controller="org.group35.view.PlanController"
      stylesheets="@PlanPage.css"
      styleClass="root-container">

    <!-- NavBar -->
    <NavBarController activePage="PLAN"/>

    <!-- Title Section -->
    <VBox styleClass="greeting-row" spacing="10">
        <Label text="You're currently on a budget." styleClass="greeting-label"/>
    </VBox>

    <!-- Main Content -->
    <GridPane styleClass="chart-row" hgap="20" vgap="20">
        <columnConstraints>
            <ColumnConstraints percentWidth="60"/>
            <ColumnConstraints percentWidth="40"/>
        </columnConstraints>

        <!-- Left: Budget Info -->
        <VBox styleClass="chart-container" spacing="20" GridPane.columnIndex="0">
            <Label text="Budget" styleClass="chart-title"/>
            <HBox spacing="20">
                <VBox spacing="15">
                    <HBox>
                        <VBox>
                            <Label text="Available" styleClass="info-label-big"/>
                            <Label fx:id="availableAmount" text="\$200 20%" styleClass="budget-amount"/>
                        </VBox>
                    </HBox>
                    <HBox>
                        <VBox>
                        <Label text="Used" styleClass="info-label-big"/>
                        <Label fx:id="usedAmount" text="\$1600 80%" styleClass="budget-amount"/>
                        </VBox>
                    </HBox>
                    <Region minHeight="15"/>
                </VBox>
                <PieChart fx:id="budgetPieChart" styleClass="pie-chart" legendVisible="false" prefWidth="350" prefHeight="350" maxWidth="350"/>
            </HBox>

            <HBox spacing="20">
                <Button text="Edit Budget" styleClass="edit-button">
                    <graphic>
                        <SVGPath content="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z"
                                 styleClass="edit-icon"/>
                    </graphic>
                </Button>
                <Button text="Get AI Suggestion" styleClass="ai-suggestion-button">
                    <graphic>
                        <SVGPath content="M7.5,5.6L5,7L6.4,4.5L5,2L7.5,3.4L10,2L8.6,4.5L10,7L7.5,5.6M19.5,15.4L22,14L20.6,16.5L22,19L19.5,17.6L17,19L18.4,16.5L17,14L19.5,15.4M22,2L20.6,4.5L22,7L19.5,5.6L17,7L18.4,4.5L17,2L19.5,3.4L22,2M13.34,12.78L15.78,10.34L13.66,8.22L11.22,10.66L13.34,12.78M14.37,7.29L16.71,9.63C17.1,10 17.1,10.65 16.71,11.04L5.04,22.71C4.65,23.1 4,23.1 3.63,22.71L1.29,20.37C0.9,20 0.9,19.35 1.29,18.96L12.96,7.29C13.35,6.9 14,6.9 14.37,7.29Z"
                                 styleClass="edit-icon"/>
                    </graphic>
                </Button>
            </HBox>
        </VBox>

        <!-- Right: Recommendation and Local Info -->
        <VBox styleClass="chart-container" spacing="10" GridPane.columnIndex="1">
            <Label text="Recommendation" styleClass="chart-title" graphicTextGap="10"/>
            <Button fx:id="recommendationButton" text="Tap to get recommendations on restaurants, coupon sites and more." styleClass="recommendation-button" graphicTextGap="20">
                <graphic>
                    <SVGPath content="M12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5M12,2A7,7 0 0,1 19,9C19,14.25 12,22 12,22C12,22 5,14.25 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9C7,10 7,12 12,18.71C17,12 17,10 17,9A5,5 0 0,0 12,4Z"
                             styleClass="Here-icon"/>
                </graphic>
            </Button>
            <Label text="Local" styleClass="chart-title"/>
            <VBox spacing="6">
                <Label text="Time Zone: Asia/Shanghai" styleClass="info-label-small"/>
                <Label text="Currency: RMB/Yuan" styleClass="info-label-small"/>
                <Label text="Ratio: 7.29 per USD" styleClass="info-label-small"/>
                <Label text="Last updated: 2025/3/18 21:14" styleClass="update-label"/>
            </VBox>
        </VBox>

    </GridPane>

</VBox>
